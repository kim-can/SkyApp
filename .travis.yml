language: android
sudo: required
android:
  components:
    # 使用 #来写注释
    #如果需要用到tools里面相关的命令，如下添加，我认为默认添加进去就可以了
    - tools
    # 编译版本
    - build-tools-24.0.0
    # Android sdk版本，如果项目里面有多个子项目，并且使用了多个版本的，这里可以指定
    - android-24
    # extra android support
    - extra-android-m2repository
    - extra-android-support
    # google play service
    - extra-google-google_play_services
    # google addon extra
    - addon-google_apis-google-19
    # 或者全家桶的意思吧
    - extra
    # 如果你需要使用模拟器测试编译出来的安装包，你需要最少添加一个系统镜像配置
    - sys-img-armeabi-v7a-android-22
#默认travis 会接受所有的 Licenses(许可证),但是你也可以定义自己的白名单
  #licenses:
  # - 'android-sdk-preview-license-52d11cd2'
  # - 'android-sdk-license-.+'
  # - 'google-gdk-license-.+'



#构建的时候，你肯定希望有一个干净的系统，所有需要清除缓存
before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

#JDK版本
jdk:
    - oraclejdk8

#gradle权限
before_install:
  #- chmod +x gradlew
  - wget http://services.gradle.org/distributions/gradle-2.14-bin.zip
  - unzip gradle-2.14-bin.zip
  - export GRADLE_HOME=$PWD/gradle-2.14
  - export PATH=$GRADLE_HOME/bin:$PATH

# Emulator Management: Create, Start and Wait
before_script:
  # Create and start emulator
  - echo no | android create avd --force -n test -t android-22 --abi armeabi-v7a
  - emulator -avd test -no-skin -no-audio -no-window &
  - android-wait-for-emulator
  - adb shell input keyevent 82 &

script: ./gradlew connectedAndroidTest