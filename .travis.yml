language: android
jdk: oraclejdk8
sudo: false

android:
  components:
    - platform-tools
    - tools
    - build-tools-24.0.0
    - android-24
    - android-22
    - extra-android-m2repository
    - sys-img-armeabi-v7a-android-22
#默认travis 会接受所有的 Licenses(许可证),但是你也可以定义自己的白名单
  #licenses:
  # - 'android-sdk-preview-license-52d11cd2'
  # - 'android-sdk-license-.+'
  # - 'google-gdk-license-.+'

#构建的时候，你肯定希望有一个干净的系统，所有需要清除缓存
before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/

#gradle权限
before_install:
  #- chmod +x gradlew
  - wget http://services.gradle.org/distributions/gradle-2.14-bin.zip
  - unzip gradle-2.14-bin.zip
  - export GRADLE_HOME=$PWD/gradle-2.14
  - export PATH=$GRADLE_HOME/bin:$PATH

# Emulator Management: Create, Start and Wait
# 模拟器启动太慢。。忽视掉
#before_script:
#  # Create and start emulator
#  - echo no | android create avd --force -n test -t android-22 --abi armeabi-v7a
#  - emulator -avd test -no-skin -no-audio -no-window &
#  - android-wait-for-emulator
#  - adb shell input keyevent 82 &




script: gradle assembleRelease